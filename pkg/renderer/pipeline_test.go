package renderer

import (
	"fmt"
	"github.com/tsagae/software3d/pkg/basics"
	"github.com/tsagae/software3d/pkg/entities"
	"github.com/tsagae/software3d/pkg/graphics"
	"image/color"
	"strings"
	"testing"
	time2 "time"
)

func SampleScene() *entities.SceneGraph {
	var specularExp basics.Scalar = 20
	torusMesh, err := graphics.NewMeshFromReader(strings.NewReader(torusMesh), basics.Vector3FromColor(color.RGBA{G: 180, A: 255}))
	if err != nil {
		panic(err)
	}
	sphereMesh, err := graphics.NewMeshFromReader(strings.NewReader(sphereMesh), basics.Vector3FromColor(color.RGBA{B: 220, A: 255}))
	if err != nil {
		panic(err)
	}

	// Scene setup
	sceneGraph := entities.NewSceneGraph()
	cameraObj := entities.NewCameraObject("mainCamera")
	rotateCameraT := basics.NewTransform(1, basics.NewQuaternionFromEulerAngles(0, 20, 0), basics.Vector3{})
	err = sceneGraph.AddChild("world", entities.NewSceneGraphNode(cameraObj, "camera"), basics.NewTransform(1, basics.NewIdentityQuaternion(), basics.NewVector3(0, 1, -3)))
	if err != nil {
		panic(err)
	}
	cameraNode := sceneGraph.GetNode("camera")
	cameraNode.CumulateBeforeLocalTranform(&rotateCameraT)

	zeroTransform := basics.NewZeroTransform()

	torusObj := entities.NewModelObject("torusObj", torusMesh, false, specularExp, false)
	torusNode := entities.NewSceneGraphNode(torusObj, "torusNode")
	err = sceneGraph.AddChild("world", torusNode, zeroTransform)
	if err != nil {
		panic(err)
	}

	sphereObj := entities.NewModelObject("sphereObj", sphereMesh, false, specularExp, true)
	sphereNode := entities.NewSceneGraphNode(sphereObj, "sphereNode")
	sphereTransform := basics.NewTransform(13, basics.NewIdentityQuaternion(), basics.Forward().Mul(15))
	err = sceneGraph.AddChild("world", sphereNode, sphereTransform)
	if err != nil {
		panic(err)
	}

	// Lights
	simpleFallOff := func(lightDistance basics.Scalar) basics.Scalar {
		return basics.Clamp(0, 1, 1-(lightDistance/basics.Scalar(50)))
	}

	err = sceneGraph.AddChild("world", entities.NewSceneGraphNode(entities.NewLightObject("light1", color.RGBA{150, 150, 150, 255}, simpleFallOff), "ligh1"), basics.NewTransform(1, basics.NewIdentityQuaternion(), basics.NewVector3(0, 5, 0)))
	if err != nil {
		panic(err)
	}
	err = sceneGraph.AddChild("world", entities.NewSceneGraphNode(entities.NewLightObject("light2", color.RGBA{80, 150, 20, 255}, simpleFallOff), "ligh2"), basics.NewTransform(1, basics.NewIdentityQuaternion(), basics.NewVector3(2, 2, 2)))
	if err != nil {
		panic(err)
	}
	return sceneGraph
}

func BenchmarkSampleScene(b *testing.B) {
	sceneGraph := SampleScene()
	fmt.Println("---------------Benchmark start---------------")
	fmt.Println("SampleScene: ", sceneGraph.String())
	var objRenderer = NewRasterRenderer(sceneGraph.GetNode("camera"), 1, 800, 600)
	b.ResetTimer()
	time := time2.Now()
	objRenderer.RenderSceneGraph(sceneGraph)
	fmt.Printf("Scene graph: %v\n", time2.Now().Sub(time))

	time = time2.Now()
	objRenderer.imageBuffer.Clear()
	fmt.Printf("clearing image buffer: %v\n", time2.Now().Sub(time))
	fmt.Println("----------------Benchmark end----------------")
}

var sphereMesh string = `
# Exported from Wings 3D 2.2.9
#mtllib sphere.mtl
o sphere3
#114 vertices, 224 faces
v 0.38268343 0.92387953 0.0000000e+0
v 0.35355339 0.92387953 0.14644661
v 0.27059805 0.92387953 0.27059805
v 0.14644661 0.92387953 0.35355339
v 2.3432602e-17 0.92387953 0.38268343
v -0.14644661 0.92387953 0.35355339
v -0.27059805 0.92387953 0.27059805
v -0.35355339 0.92387953 0.14644661
v -0.38268343 0.92387953 4.6865204e-17
v -0.35355339 0.92387953 -0.14644661
v -0.27059805 0.92387953 -0.27059805
v -0.14644661 0.92387953 -0.35355339
v -7.0297806e-17 0.92387953 -0.38268343
v 0.14644661 0.92387953 -0.35355339
v 0.27059805 0.92387953 -0.27059805
v 0.35355339 0.92387953 -0.14644661
v 0.70710678 0.70710678 0.0000000e+0
v 0.65328148 0.70710678 0.27059805
v 0.50000000 0.70710678 0.50000000
v 0.27059805 0.70710678 0.65328148
v 4.3297803e-17 0.70710678 0.70710678
v -0.27059805 0.70710678 0.65328148
v -0.50000000 0.70710678 0.50000000
v -0.65328148 0.70710678 0.27059805
v -0.70710678 0.70710678 8.6595606e-17
v -0.65328148 0.70710678 -0.27059805
v -0.50000000 0.70710678 -0.50000000
v -0.27059805 0.70710678 -0.65328148
v -1.2989341e-16 0.70710678 -0.70710678
v 0.27059805 0.70710678 -0.65328148
v 0.50000000 0.70710678 -0.50000000
v 0.65328148 0.70710678 -0.27059805
v 0.92387953 0.38268343 0.0000000e+0
v 0.85355339 0.38268343 0.35355339
v 0.65328148 0.38268343 0.65328148
v 0.35355339 0.38268343 0.85355339
v 5.6571306e-17 0.38268343 0.92387953
v -0.35355339 0.38268343 0.85355339
v -0.65328148 0.38268343 0.65328148
v -0.85355339 0.38268343 0.35355339
v -0.92387953 0.38268343 1.1314261e-16
v -0.85355339 0.38268343 -0.35355339
v -0.65328148 0.38268343 -0.65328148
v -0.35355339 0.38268343 -0.85355339
v -1.6971392e-16 0.38268343 -0.92387953
v 0.35355339 0.38268343 -0.85355339
v 0.65328148 0.38268343 -0.65328148
v 0.85355339 0.38268343 -0.35355339
v 1.00000000 6.1232340e-17 0.0000000e+0
v 0.92387953 6.1232340e-17 0.38268343
v 0.70710678 6.1232340e-17 0.70710678
v 0.38268343 6.1232340e-17 0.92387953
v 6.1232340e-17 6.1232340e-17 1.00000000
v -0.38268343 6.1232340e-17 0.92387953
v -0.70710678 6.1232340e-17 0.70710678
v -0.92387953 6.1232340e-17 0.38268343
v -1.00000000 6.1232340e-17 1.2246468e-16
v -0.92387953 6.1232340e-17 -0.38268343
v -0.70710678 6.1232340e-17 -0.70710678
v -0.38268343 6.1232340e-17 -0.92387953
v -1.8369702e-16 6.1232340e-17 -1.00000000
v 0.38268343 6.1232340e-17 -0.92387953
v 0.70710678 6.1232340e-17 -0.70710678
v 0.92387953 6.1232340e-17 -0.38268343
v 0.92387953 -0.38268343 0.0000000e+0
v 0.85355339 -0.38268343 0.35355339
v 0.65328148 -0.38268343 0.65328148
v 0.35355339 -0.38268343 0.85355339
v 5.6571306e-17 -0.38268343 0.92387953
v -0.35355339 -0.38268343 0.85355339
v -0.65328148 -0.38268343 0.65328148
v -0.85355339 -0.38268343 0.35355339
v -0.92387953 -0.38268343 1.1314261e-16
v -0.85355339 -0.38268343 -0.35355339
v -0.65328148 -0.38268343 -0.65328148
v -0.35355339 -0.38268343 -0.85355339
v -1.6971392e-16 -0.38268343 -0.92387953
v 0.35355339 -0.38268343 -0.85355339
v 0.65328148 -0.38268343 -0.65328148
v 0.85355339 -0.38268343 -0.35355339
v 0.70710678 -0.70710678 0.0000000e+0
v 0.65328148 -0.70710678 0.27059805
v 0.50000000 -0.70710678 0.50000000
v 0.27059805 -0.70710678 0.65328148
v 4.3297803e-17 -0.70710678 0.70710678
v -0.27059805 -0.70710678 0.65328148
v -0.50000000 -0.70710678 0.50000000
v -0.65328148 -0.70710678 0.27059805
v -0.70710678 -0.70710678 8.6595606e-17
v -0.65328148 -0.70710678 -0.27059805
v -0.50000000 -0.70710678 -0.50000000
v -0.27059805 -0.70710678 -0.65328148
v -1.2989341e-16 -0.70710678 -0.70710678
v 0.27059805 -0.70710678 -0.65328148
v 0.50000000 -0.70710678 -0.50000000
v 0.65328148 -0.70710678 -0.27059805
v 0.38268343 -0.92387953 0.0000000e+0
v 0.35355339 -0.92387953 0.14644661
v 0.27059805 -0.92387953 0.27059805
v 0.14644661 -0.92387953 0.35355339
v 2.3432602e-17 -0.92387953 0.38268343
v -0.14644661 -0.92387953 0.35355339
v -0.27059805 -0.92387953 0.27059805
v -0.35355339 -0.92387953 0.14644661
v -0.38268343 -0.92387953 4.6865204e-17
v -0.35355339 -0.92387953 -0.14644661
v -0.27059805 -0.92387953 -0.27059805
v -0.14644661 -0.92387953 -0.35355339
v -7.0297806e-17 -0.92387953 -0.38268343
v 0.14644661 -0.92387953 -0.35355339
v 0.27059805 -0.92387953 -0.27059805
v 0.35355339 -0.92387953 -0.14644661
v 0.0000000e+0 1.00000000 0.0000000e+0
v 0.0000000e+0 -1.00000000 0.0000000e+0
vn 0.44254783 0.89674490 -8.0352547e-17
vn 0.35310199 0.92408176 0.14625963
vn 0.31292857 0.89674490 0.31292857
vn 0.14625963 0.92408176 0.35310199
vn 2.3633102e-18 0.89674490 0.44254783
vn -0.14625963 0.92408176 0.35310199
vn -0.31292857 0.89674490 0.31292857
vn -0.35310199 0.92408176 0.14625963
vn -0.44254783 0.89674490 2.5996412e-17
vn -0.35310199 0.92408176 -0.14625963
vn -0.31292857 0.89674490 -0.31292857
vn -0.14625963 0.92408176 -0.35310199
vn -3.7812963e-17 0.89674490 -0.44254783
vn 0.14625963 0.92408176 -0.35310199
vn 0.31292857 0.89674490 -0.31292857
vn 0.35310199 0.92408176 -0.14625963
vn 0.70658450 0.70762868 1.3574215e-16
vn 0.65279895 0.70762868 0.27039818
vn 0.49963069 0.70762868 0.49963069
vn 0.27039818 0.70762868 0.65279895
vn 7.1443235e-18 0.70762868 0.70658450
vn -0.27039818 0.70762868 0.65279895
vn -0.49963069 0.70762868 0.49963069
vn -0.65279895 0.70762868 0.27039818
vn -0.70658450 0.70762868 1.1430918e-16
vn -0.65279895 0.70762868 -0.27039818
vn -0.49963069 0.70762868 -0.49963069
vn -0.27039818 0.70762868 -0.65279895
vn 1.4288647e-17 0.70762868 -0.70658450
vn 0.27039818 0.70762868 -0.65279895
vn 0.49963069 0.70762868 -0.49963069
vn 0.65279895 0.70762868 -0.27039818
vn 0.92368212 0.38315969 -8.6274346e-17
vn 0.85337100 0.38315969 0.35347784
vn 0.65314189 0.38315969 0.65314189
vn 0.35347784 0.38315969 0.85337100
vn 1.0784293e-17 0.38315969 0.92368212
vn -0.35347784 0.38315969 0.85337100
vn -0.65314189 0.38315969 0.65314189
vn -0.85337100 0.38315969 0.35347784
vn -0.92368212 0.38315969 1.4738534e-16
vn -0.85337100 0.38315969 -0.35347784
vn -0.65314189 0.38315969 -0.65314189
vn -0.35347784 0.38315969 -0.85337100
vn -4.3137173e-17 0.38315969 -0.92368212
vn 0.35347784 0.38315969 -0.85337100
vn 0.65314189 0.38315969 -0.65314189
vn 0.85337100 0.38315969 -0.35347784
vn 1.00000000 0.0000000e+0 -1.0812319e-16
vn 0.92387953 -1.8020531e-17 0.38268343
vn 0.70710678 0.0000000e+0 0.70710678
vn 0.38268343 3.6041063e-17 0.92387953
vn 0.0000000e+0 7.2082126e-18 1.00000000
vn -0.38268343 1.8020531e-17 0.92387953
vn -0.70710678 1.4416425e-17 0.70710678
vn -0.92387953 3.6041063e-18 0.38268343
vn -1.00000000 -7.2082126e-18 1.4416425e-16
vn -0.92387953 -5.4061594e-17 -0.38268343
vn -0.70710678 -8.6498551e-17 -0.70710678
vn -0.38268343 -1.4416425e-17 -0.92387953
vn -3.6761884e-16 7.2082126e-18 -1.00000000
vn 0.38268343 0.0000000e+0 -0.92387953
vn 0.70710678 1.4416425e-17 -0.70710678
vn 0.92387953 -3.6041063e-17 -0.38268343
vn 0.92368212 -0.38315969 -1.4019581e-16
vn 0.85337100 -0.38315969 0.35347784
vn 0.65314189 -0.38315969 0.65314189
vn 0.35347784 -0.38315969 0.85337100
vn 7.1895288e-18 -0.38315969 0.92368212
vn -0.35347784 -0.38315969 0.85337100
vn -0.65314189 -0.38315969 0.65314189
vn -0.85337100 -0.38315969 0.35347784
vn -0.92368212 -0.38315969 1.5816963e-16
vn -0.85337100 -0.38315969 -0.35347784
vn -0.65314189 -0.38315969 -0.65314189
vn -0.35347784 -0.38315969 -0.85337100
vn 7.1895288e-18 -0.38315969 -0.92368212
vn 0.35347784 -0.38315969 -0.85337100
vn 0.65314189 -0.38315969 -0.65314189
vn 0.85337100 -0.38315969 -0.35347784
vn 0.70658450 -0.70762868 -6.7871073e-17
vn 0.65279895 -0.70762868 0.27039818
vn 0.49963069 -0.70762868 0.49963069
vn 0.27039818 -0.70762868 0.65279895
vn 1.0716485e-17 -0.70762868 0.70658450
vn -0.27039818 -0.70762868 0.65279895
vn -0.49963069 -0.70762868 0.49963069
vn -0.65279895 -0.70762868 0.27039818
vn -0.70658450 -0.70762868 1.1430918e-16
vn -0.65279895 -0.70762868 -0.27039818
vn -0.49963069 -0.70762868 -0.49963069
vn -0.27039818 -0.70762868 -0.65279895
vn 3.5721617e-18 -0.70762868 -0.70658450
vn 0.27039818 -0.70762868 -0.65279895
vn 0.49963069 -0.70762868 -0.49963069
vn 0.65279895 -0.70762868 -0.27039818
vn 0.44254783 -0.89674490 2.1033461e-16
vn 0.35310199 -0.92408176 0.14625963
vn 0.31292857 -0.89674490 0.31292857
vn 0.14625963 -0.92408176 0.35310199
vn 2.3633102e-17 -0.89674490 0.44254783
vn -0.14625963 -0.92408176 0.35310199
vn -0.31292857 -0.89674490 0.31292857
vn -0.35310199 -0.92408176 0.14625963
vn -0.44254783 -0.89674490 5.4356134e-17
vn -0.35310199 -0.92408176 -0.14625963
vn -0.31292857 -0.89674490 -0.31292857
vn -0.14625963 -0.92408176 -0.35310199
vn -3.5449653e-17 -0.89674490 -0.44254783
vn 0.14625963 -0.92408176 -0.35310199
vn 0.31292857 -0.89674490 -0.31292857
vn 0.35310199 -0.92408176 -0.14625963
vn -7.0801599e-18 1.00000000 -4.3365979e-17
vn -8.8501998e-18 -1.00000000 -6.2393909e-17
g sphere3_default
#usemtl default
s 1
f 1//1 18//18 17//17
f 1//1 32//32 16//16
f 1//1 113//113 2//2
f 2//2 18//18 1//1
f 2//2 113//113 3//3
f 3//3 18//18 2//2
f 3//3 20//20 19//19
f 3//3 113//113 4//4
f 4//4 20//20 3//3
f 4//4 113//113 5//5
f 5//5 20//20 4//4
f 5//5 22//22 21//21
f 5//5 113//113 6//6
f 6//6 22//22 5//5
f 6//6 113//113 7//7
f 7//7 22//22 6//6
f 7//7 24//24 23//23
f 7//7 113//113 8//8
f 8//8 24//24 7//7
f 8//8 113//113 9//9
f 9//9 24//24 8//8
f 9//9 26//26 25//25
f 9//9 113//113 10//10
f 10//10 26//26 9//9
f 10//10 113//113 11//11
f 11//11 26//26 10//10
f 11//11 28//28 27//27
f 11//11 113//113 12//12
f 12//12 28//28 11//11
f 12//12 113//113 13//13
f 13//13 28//28 12//12
f 13//13 30//30 29//29
f 13//13 113//113 14//14
f 14//14 30//30 13//13
f 14//14 113//113 15//15
f 15//15 30//30 14//14
f 15//15 32//32 31//31
f 15//15 113//113 16//16
f 16//16 32//32 15//15
f 16//16 113//113 1//1
f 17//17 32//32 1//1
f 17//17 33//33 32//32
f 18//18 33//33 17//17
f 18//18 35//35 34//34
f 19//19 18//18 3//3
f 19//19 35//35 18//18
f 20//20 35//35 19//19
f 20//20 37//37 36//36
f 21//21 20//20 5//5
f 21//21 37//37 20//20
f 22//22 37//37 21//21
f 22//22 39//39 38//38
f 23//23 22//22 7//7
f 23//23 39//39 22//22
f 24//24 39//39 23//23
f 24//24 41//41 40//40
f 25//25 24//24 9//9
f 25//25 41//41 24//24
f 26//26 41//41 25//25
f 26//26 43//43 42//42
f 27//27 26//26 11//11
f 27//27 43//43 26//26
f 28//28 43//43 27//27
f 28//28 45//45 44//44
f 29//29 28//28 13//13
f 29//29 45//45 28//28
f 30//30 45//45 29//29
f 30//30 47//47 46//46
f 31//31 30//30 15//15
f 31//31 47//47 30//30
f 32//32 33//33 48//48
f 32//32 47//47 31//31
f 33//33 50//50 49//49
f 33//33 64//64 48//48
f 34//34 33//33 18//18
f 34//34 50//50 33//33
f 35//35 50//50 34//34
f 35//35 52//52 51//51
f 36//36 35//35 20//20
f 36//36 52//52 35//35
f 37//37 52//52 36//36
f 37//37 54//54 53//53
f 38//38 37//37 22//22
f 38//38 54//54 37//37
f 39//39 54//54 38//38
f 39//39 56//56 55//55
f 40//40 39//39 24//24
f 40//40 56//56 39//39
f 41//41 56//56 40//40
f 41//41 58//58 57//57
f 42//42 41//41 26//26
f 42//42 58//58 41//41
f 43//43 58//58 42//42
f 43//43 60//60 59//59
f 44//44 43//43 28//28
f 44//44 60//60 43//43
f 45//45 60//60 44//44
f 45//45 62//62 61//61
f 46//46 45//45 30//30
f 46//46 62//62 45//45
f 47//47 62//62 46//46
f 47//47 64//64 63//63
f 48//48 47//47 32//32
f 48//48 64//64 47//47
f 49//49 64//64 33//33
f 49//49 65//65 64//64
f 50//50 65//65 49//49
f 50//50 67//67 66//66
f 51//51 50//50 35//35
f 51//51 67//67 50//50
f 52//52 67//67 51//51
f 52//52 69//69 68//68
f 53//53 52//52 37//37
f 53//53 69//69 52//52
f 54//54 69//69 53//53
f 54//54 71//71 70//70
f 55//55 54//54 39//39
f 55//55 71//71 54//54
f 56//56 71//71 55//55
f 56//56 73//73 72//72
f 57//57 56//56 41//41
f 57//57 73//73 56//56
f 58//58 73//73 57//57
f 58//58 75//75 74//74
f 59//59 58//58 43//43
f 59//59 75//75 58//58
f 60//60 75//75 59//59
f 60//60 77//77 76//76
f 61//61 60//60 45//45
f 61//61 77//77 60//60
f 62//62 77//77 61//61
f 62//62 79//79 78//78
f 63//63 62//62 47//47
f 63//63 79//79 62//62
f 64//64 65//65 80//80
f 64//64 79//79 63//63
f 65//65 82//82 81//81
f 65//65 96//96 80//80
f 66//66 65//65 50//50
f 66//66 82//82 65//65
f 67//67 82//82 66//66
f 67//67 84//84 83//83
f 68//68 67//67 52//52
f 68//68 84//84 67//67
f 69//69 84//84 68//68
f 69//69 86//86 85//85
f 70//70 69//69 54//54
f 70//70 86//86 69//69
f 71//71 86//86 70//70
f 71//71 88//88 87//87
f 72//72 71//71 56//56
f 72//72 88//88 71//71
f 73//73 88//88 72//72
f 73//73 90//90 89//89
f 74//74 73//73 58//58
f 74//74 90//90 73//73
f 75//75 90//90 74//74
f 75//75 92//92 91//91
f 76//76 75//75 60//60
f 76//76 92//92 75//75
f 77//77 92//92 76//76
f 77//77 94//94 93//93
f 78//78 77//77 62//62
f 78//78 94//94 77//77
f 79//79 94//94 78//78
f 79//79 96//96 95//95
f 80//80 79//79 64//64
f 80//80 96//96 79//79
f 81//81 96//96 65//65
f 81//81 97//97 96//96
f 82//82 97//97 81//81
f 82//82 99//99 98//98
f 83//83 82//82 67//67
f 83//83 99//99 82//82
f 84//84 99//99 83//83
f 84//84 101//101 100//100
f 85//85 84//84 69//69
f 85//85 101//101 84//84
f 86//86 101//101 85//85
f 86//86 103//103 102//102
f 87//87 86//86 71//71
f 87//87 103//103 86//86
f 88//88 103//103 87//87
f 88//88 105//105 104//104
f 89//89 88//88 73//73
f 89//89 105//105 88//88
f 90//90 105//105 89//89
f 90//90 107//107 106//106
f 91//91 90//90 75//75
f 91//91 107//107 90//90
f 92//92 107//107 91//91
f 92//92 109//109 108//108
f 93//93 92//92 77//77
f 93//93 109//109 92//92
f 94//94 109//109 93//93
f 94//94 111//111 110//110
f 95//95 94//94 79//79
f 95//95 111//111 94//94
f 96//96 97//97 112//112
f 96//96 111//111 95//95
f 97//97 114//114 112//112
f 98//98 97//97 82//82
f 98//98 114//114 97//97
f 99//99 114//114 98//98
f 100//100 99//99 84//84
f 100//100 114//114 99//99
f 101//101 114//114 100//100
f 102//102 101//101 86//86
f 102//102 114//114 101//101
f 103//103 114//114 102//102
f 104//104 103//103 88//88
f 104//104 114//114 103//103
f 105//105 114//114 104//104
f 106//106 105//105 90//90
f 106//106 114//114 105//105
f 107//107 114//114 106//106
f 108//108 107//107 92//92
f 108//108 114//114 107//107
f 109//109 114//114 108//108
f 110//110 109//109 94//94
f 110//110 114//114 109//109
f 111//111 114//114 110//110
f 112//112 111//111 96//96
f 112//112 114//114 111//111
`

var torusMesh string = `
# Exported from Wings 3D 2.2.9
#mtllib torus.mtl
o Torus1
#128 vertices, 256 faces
v 1.25000000 0.0000000e+0 0.0000000e+0
v 1.17677670 -0.17677670 0.0000000e+0
v 1.00000000 -0.25000000 0.0000000e+0
v 0.82322330 -0.17677670 0.0000000e+0
v 0.75000000 -3.0616170e-17 0.0000000e+0
v 0.82322330 0.17677670 0.0000000e+0
v 1.00000000 0.25000000 0.0000000e+0
v 1.17677670 0.17677670 0.0000000e+0
v 1.15484942 0.0000000e+0 0.47835429
v 1.08719990 -0.17677670 0.45033294
v 0.92387953 -0.25000000 0.38268343
v 0.76055916 -0.17677670 0.31503392
v 0.69290965 -3.0616170e-17 0.28701257
v 0.76055916 0.17677670 0.31503392
v 0.92387953 0.25000000 0.38268343
v 1.08719990 0.17677670 0.45033294
v 0.88388348 0.0000000e+0 0.88388348
v 0.83210678 -0.17677670 0.83210678
v 0.70710678 -0.25000000 0.70710678
v 0.58210678 -0.17677670 0.58210678
v 0.53033009 -3.0616170e-17 0.53033009
v 0.58210678 0.17677670 0.58210678
v 0.70710678 0.25000000 0.70710678
v 0.83210678 0.17677670 0.83210678
v 0.47835429 0.0000000e+0 1.15484942
v 0.45033294 -0.17677670 1.08719990
v 0.38268343 -0.25000000 0.92387953
v 0.31503392 -0.17677670 0.76055916
v 0.28701257 -3.0616170e-17 0.69290965
v 0.31503392 0.17677670 0.76055916
v 0.38268343 0.25000000 0.92387953
v 0.45033294 0.17677670 1.08719990
v 7.6540425e-17 0.0000000e+0 1.25000000
v 7.2056791e-17 -0.17677670 1.17677670
v 6.1232340e-17 -0.25000000 1.00000000
v 5.0407889e-17 -0.17677670 0.82322330
v 4.5924255e-17 -3.0616170e-17 0.75000000
v 5.0407889e-17 0.17677670 0.82322330
v 6.1232340e-17 0.25000000 1.00000000
v 7.2056791e-17 0.17677670 1.17677670
v -0.47835429 0.0000000e+0 1.15484942
v -0.45033294 -0.17677670 1.08719990
v -0.38268343 -0.25000000 0.92387953
v -0.31503392 -0.17677670 0.76055916
v -0.28701257 -3.0616170e-17 0.69290965
v -0.31503392 0.17677670 0.76055916
v -0.38268343 0.25000000 0.92387953
v -0.45033294 0.17677670 1.08719990
v -0.88388348 0.0000000e+0 0.88388348
v -0.83210678 -0.17677670 0.83210678
v -0.70710678 -0.25000000 0.70710678
v -0.58210678 -0.17677670 0.58210678
v -0.53033009 -3.0616170e-17 0.53033009
v -0.58210678 0.17677670 0.58210678
v -0.70710678 0.25000000 0.70710678
v -0.83210678 0.17677670 0.83210678
v -1.15484942 0.0000000e+0 0.47835429
v -1.08719990 -0.17677670 0.45033294
v -0.92387953 -0.25000000 0.38268343
v -0.76055916 -0.17677670 0.31503392
v -0.69290965 -3.0616170e-17 0.28701257
v -0.76055916 0.17677670 0.31503392
v -0.92387953 0.25000000 0.38268343
v -1.08719990 0.17677670 0.45033294
v -1.25000000 0.0000000e+0 1.5308085e-16
v -1.17677670 -0.17677670 1.4411358e-16
v -1.00000000 -0.25000000 1.2246468e-16
v -0.82322330 -0.17677670 1.0081578e-16
v -0.75000000 -3.0616170e-17 9.1848510e-17
v -0.82322330 0.17677670 1.0081578e-16
v -1.00000000 0.25000000 1.2246468e-16
v -1.17677670 0.17677670 1.4411358e-16
v -1.15484942 0.0000000e+0 -0.47835429
v -1.08719990 -0.17677670 -0.45033294
v -0.92387953 -0.25000000 -0.38268343
v -0.76055916 -0.17677670 -0.31503392
v -0.69290965 -3.0616170e-17 -0.28701257
v -0.76055916 0.17677670 -0.31503392
v -0.92387953 0.25000000 -0.38268343
v -1.08719990 0.17677670 -0.45033294
v -0.88388348 0.0000000e+0 -0.88388348
v -0.83210678 -0.17677670 -0.83210678
v -0.70710678 -0.25000000 -0.70710678
v -0.58210678 -0.17677670 -0.58210678
v -0.53033009 -3.0616170e-17 -0.53033009
v -0.58210678 0.17677670 -0.58210678
v -0.70710678 0.25000000 -0.70710678
v -0.83210678 0.17677670 -0.83210678
v -0.47835429 0.0000000e+0 -1.15484942
v -0.45033294 -0.17677670 -1.08719990
v -0.38268343 -0.25000000 -0.92387953
v -0.31503392 -0.17677670 -0.76055916
v -0.28701257 -3.0616170e-17 -0.69290965
v -0.31503392 0.17677670 -0.76055916
v -0.38268343 0.25000000 -0.92387953
v -0.45033294 0.17677670 -1.08719990
v -2.2962127e-16 0.0000000e+0 -1.25000000
v -2.1617037e-16 -0.17677670 -1.17677670
v -1.8369702e-16 -0.25000000 -1.00000000
v -1.5122367e-16 -0.17677670 -0.82322330
v -1.3777276e-16 -3.0616170e-17 -0.75000000
v -1.5122367e-16 0.17677670 -0.82322330
v -1.8369702e-16 0.25000000 -1.00000000
v -2.1617037e-16 0.17677670 -1.17677670
v 0.47835429 0.0000000e+0 -1.15484942
v 0.45033294 -0.17677670 -1.08719990
v 0.38268343 -0.25000000 -0.92387953
v 0.31503392 -0.17677670 -0.76055916
v 0.28701257 -3.0616170e-17 -0.69290965
v 0.31503392 0.17677670 -0.76055916
v 0.38268343 0.25000000 -0.92387953
v 0.45033294 0.17677670 -1.08719990
v 0.88388348 0.0000000e+0 -0.88388348
v 0.83210678 -0.17677670 -0.83210678
v 0.70710678 -0.25000000 -0.70710678
v 0.58210678 -0.17677670 -0.58210678
v 0.53033009 -3.0616170e-17 -0.53033009
v 0.58210678 0.17677670 -0.58210678
v 0.70710678 0.25000000 -0.70710678
v 0.83210678 0.17677670 -0.83210678
v 1.15484942 0.0000000e+0 -0.47835429
v 1.08719990 -0.17677670 -0.45033294
v 0.92387953 -0.25000000 -0.38268343
v 0.76055916 -0.17677670 -0.31503392
v 0.69290965 -3.0616170e-17 -0.28701257
v 0.76055916 0.17677670 -0.31503392
v 0.92387953 0.25000000 -0.38268343
v 1.08719990 0.17677670 -0.45033294
vn 1.00000000 5.0400074e-16 -3.5890962e-16
vn 0.70509498 -0.70911288 -1.1755148e-16
vn 6.0258661e-17 -1.00000000 -3.7661663e-18
vn -0.70509498 -0.70911288 6.2567723e-17
vn -1.00000000 -4.5818250e-17 2.2909125e-17
vn -0.70509498 0.70911288 1.1375950e-17
vn 0.0000000e+0 1.00000000 -1.8830832e-17
vn 0.70509498 0.70911288 -1.3651139e-16
vn 0.92387953 4.2000062e-16 0.38268343
vn 0.65142282 -0.70911288 0.26982817
vn 5.2726329e-17 -1.00000000 5.6492495e-18
vn -0.65142282 -0.70911288 -0.26982817
vn -0.92387953 -2.2145487e-16 -0.38268343
vn -0.65142282 0.70911288 -0.26982817
vn 2.0337298e-16 1.00000000 6.4024828e-17
vn 0.65142282 0.70911288 0.26982817
vn 0.70710678 5.9563724e-16 0.70710678
vn 0.49857744 -0.70911288 0.49857744
vn 3.0129331e-17 -1.00000000 -1.0545266e-16
vn -0.49857744 -0.70911288 -0.49857744
vn -0.70710678 -2.4436400e-16 -0.70710678
vn -0.49857744 0.70911288 -0.49857744
vn 1.5817899e-16 1.00000000 1.0545266e-16
vn 0.49857744 0.70911288 0.49857744
vn 0.38268343 5.8036449e-16 0.92387953
vn 0.26982817 -0.70911288 0.65142282
vn -2.2596998e-17 -1.00000000 2.2596998e-17
vn -0.26982817 -0.70911288 -0.65142282
vn -0.38268343 -2.9018225e-16 -0.92387953
vn -0.26982817 0.70911288 -0.65142282
vn 0.0000000e+0 1.00000000 1.2804966e-16
vn 0.26982817 0.70911288 0.65142282
vn -1.5272750e-17 4.5818250e-16 1.00000000
vn -1.8959916e-18 -0.70911288 0.70509498
vn 3.7661663e-18 -1.00000000 -1.2051732e-16
vn -3.7919832e-18 -0.70911288 -0.70509498
vn -1.5272750e-17 -3.6654600e-16 -1.00000000
vn -3.7919832e-18 0.70911288 -0.70509498
vn 7.5323327e-18 1.00000000 2.7116398e-16
vn 7.5839664e-18 0.70911288 0.70509498
vn -0.38268343 4.8872799e-16 0.92387953
vn -0.26982817 -0.70911288 0.65142282
vn 8.2855659e-17 -1.00000000 -6.0258661e-17
vn 0.26982817 -0.70911288 -0.65142282
vn 0.38268343 -3.2072775e-16 -0.92387953
vn 0.26982817 0.70911288 -0.65142282
vn 3.7661663e-17 1.00000000 3.7661663e-17
vn -0.26982817 0.70911288 0.65142282
vn -0.70710678 4.5818250e-16 0.70710678
vn -0.49857744 -0.70911288 0.49857744
vn 1.5064665e-16 -1.00000000 -4.3687529e-16
vn 0.49857744 -0.70911288 -0.49857744
vn 0.70710678 -4.5818250e-16 -0.70710678
vn 0.49857744 0.70911288 -0.49857744
vn -1.8077598e-16 1.00000000 6.7790994e-17
vn -0.49857744 0.70911288 0.49857744
vn -0.92387953 4.8109162e-16 0.38268343
vn -0.65142282 -0.70911288 0.26982817
vn -8.2855659e-17 -1.00000000 -4.1427830e-17
vn 0.65142282 -0.70911288 -0.26982817
vn 0.92387953 -4.5054612e-16 -0.38268343
vn 0.65142282 0.70911288 -0.26982817
vn -2.2596998e-16 1.00000000 6.7790994e-17
vn -0.65142282 0.70911288 0.26982817
vn -1.00000000 1.0690925e-15 0.0000000e+0
vn -0.70509498 -0.70911288 5.6879748e-17
vn -7.5323327e-17 -1.00000000 6.0258661e-17
vn 0.70509498 -0.70911288 -1.1375950e-16
vn 1.00000000 -2.4436400e-16 -1.9090937e-16
vn 0.70509498 0.70911288 -1.4788734e-16
vn -3.0129331e-16 1.00000000 -4.5193996e-17
vn -0.70509498 0.70911288 9.4799580e-17
vn -0.92387953 -3.5127325e-16 -0.38268343
vn -0.65142282 -0.70911288 -0.26982817
vn -4.5193996e-17 -1.00000000 -3.0129331e-17
vn 0.65142282 -0.70911288 0.26982817
vn 0.92387953 -2.1381850e-16 0.38268343
vn 0.65142282 0.70911288 0.26982817
vn 5.2726329e-17 1.00000000 2.0713915e-17
vn -0.65142282 0.70911288 -0.26982817
vn -0.70710678 1.1454562e-15 -0.70710678
vn -0.49857744 -0.70911288 -0.49857744
vn 2.0337298e-16 -1.00000000 1.9584065e-16
vn 0.49857744 -0.70911288 0.49857744
vn 0.70710678 -4.7345525e-16 0.70710678
vn 0.49857744 0.70911288 0.49857744
vn -9.0387992e-17 1.00000000 0.0000000e+0
vn -0.49857744 0.70911288 -0.49857744
vn -0.38268343 5.8036449e-16 -0.92387953
vn -0.26982817 -0.70911288 -0.65142282
vn 6.4024828e-17 -1.00000000 6.7790994e-17
vn 0.26982817 -0.70911288 0.65142282
vn 0.38268343 -3.0545500e-16 0.92387953
vn 0.26982817 0.70911288 0.65142282
vn 6.7790994e-17 1.00000000 -9.0387992e-17
vn -0.26982817 0.70911288 -0.65142282
vn -7.6363749e-18 4.8872799e-16 -1.00000000
vn -1.5167933e-17 -0.70911288 -0.70509498
vn 1.0921882e-16 -1.00000000 3.0129331e-17
vn 1.4409536e-16 -0.70911288 0.70509498
vn 1.5272750e-17 -3.6654600e-16 1.00000000
vn 4.1711815e-17 0.70911288 0.70509498
vn 3.7661663e-18 1.00000000 -2.1090531e-16
vn -1.1375950e-17 0.70911288 -0.70509498
vn 0.38268343 5.3454624e-16 -0.92387953
vn 0.26982817 -0.70911288 -0.65142282
vn -4.5193996e-17 -1.00000000 9.0387992e-17
vn -0.26982817 -0.70911288 0.65142282
vn -0.38268343 -3.0545500e-16 0.92387953
vn -0.26982817 0.70911288 0.65142282
vn 7.5323327e-18 1.00000000 -9.0387992e-17
vn 0.26982817 0.70911288 -0.65142282
vn 0.70710678 4.8872799e-16 -0.70710678
vn 0.49857744 -0.70911288 -0.49857744
vn -6.0258661e-17 -1.00000000 1.4311432e-16
vn -0.49857744 -0.70911288 0.49857744
vn -0.70710678 -3.6654600e-16 0.70710678
vn -0.49857744 0.70911288 0.49857744
vn 4.5193996e-17 1.00000000 2.2596998e-17
vn 0.49857744 0.70911288 -0.49857744
vn 0.92387953 4.9636437e-16 -0.38268343
vn 0.65142282 -0.70911288 -0.26982817
vn -1.0545266e-16 -1.00000000 6.7790994e-17
vn -0.65142282 -0.70911288 0.26982817
vn -0.92387953 -4.5054612e-16 0.38268343
vn -0.65142282 0.70911288 0.26982817
vn 3.0129331e-17 1.00000000 -1.5064665e-17
vn 0.65142282 0.70911288 -0.26982817
g Torus1_default
#usemtl default
s 1
f 1//1 9//9 2//2
f 1//1 121//121 8//8
f 2//2 9//9 10//10
f 2//2 11//11 3//3
f 2//2 121//121 1//1
f 2//2 123//123 122//122
f 3//3 11//11 4//4
f 3//3 123//123 2//2
f 4//4 11//11 12//12
f 4//4 13//13 5//5
f 4//4 123//123 3//3
f 4//4 125//125 124//124
f 5//5 13//13 6//6
f 5//5 125//125 4//4
f 6//6 13//13 14//14
f 6//6 15//15 7//7
f 6//6 125//125 5//5
f 6//6 127//127 126//126
f 7//7 15//15 8//8
f 7//7 127//127 6//6
f 8//8 9//9 1//1
f 8//8 15//15 16//16
f 8//8 121//121 128//128
f 8//8 127//127 7//7
f 9//9 18//18 10//10
f 9//9 24//24 17//17
f 10//10 11//11 2//2
f 10//10 18//18 11//11
f 11//11 18//18 19//19
f 11//11 20//20 12//12
f 12//12 13//13 4//4
f 12//12 20//20 13//13
f 13//13 20//20 21//21
f 13//13 22//22 14//14
f 14//14 15//15 6//6
f 14//14 22//22 15//15
f 15//15 22//22 23//23
f 15//15 24//24 16//16
f 16//16 9//9 8//8
f 16//16 24//24 9//9
f 17//17 18//18 9//9
f 17//17 25//25 18//18
f 18//18 25//25 26//26
f 18//18 27//27 19//19
f 19//19 20//20 11//11
f 19//19 27//27 20//20
f 20//20 27//27 28//28
f 20//20 29//29 21//21
f 21//21 22//22 13//13
f 21//21 29//29 22//22
f 22//22 29//29 30//30
f 22//22 31//31 23//23
f 23//23 24//24 15//15
f 23//23 31//31 24//24
f 24//24 25//25 17//17
f 24//24 31//31 32//32
f 25//25 34//34 26//26
f 25//25 40//40 33//33
f 26//26 27//27 18//18
f 26//26 34//34 27//27
f 27//27 34//34 35//35
f 27//27 36//36 28//28
f 28//28 29//29 20//20
f 28//28 36//36 29//29
f 29//29 36//36 37//37
f 29//29 38//38 30//30
f 30//30 31//31 22//22
f 30//30 38//38 31//31
f 31//31 38//38 39//39
f 31//31 40//40 32//32
f 32//32 25//25 24//24
f 32//32 40//40 25//25
f 33//33 34//34 25//25
f 33//33 41//41 34//34
f 34//34 41//41 42//42
f 34//34 43//43 35//35
f 35//35 36//36 27//27
f 35//35 43//43 36//36
f 36//36 43//43 44//44
f 36//36 45//45 37//37
f 37//37 38//38 29//29
f 37//37 45//45 38//38
f 38//38 45//45 46//46
f 38//38 47//47 39//39
f 39//39 40//40 31//31
f 39//39 47//47 40//40
f 40//40 41//41 33//33
f 40//40 47//47 48//48
f 41//41 50//50 42//42
f 41//41 56//56 49//49
f 42//42 43//43 34//34
f 42//42 50//50 43//43
f 43//43 50//50 51//51
f 43//43 52//52 44//44
f 44//44 45//45 36//36
f 44//44 52//52 45//45
f 45//45 52//52 53//53
f 45//45 54//54 46//46
f 46//46 47//47 38//38
f 46//46 54//54 47//47
f 47//47 54//54 55//55
f 47//47 56//56 48//48
f 48//48 41//41 40//40
f 48//48 56//56 41//41
f 49//49 50//50 41//41
f 49//49 57//57 50//50
f 50//50 57//57 58//58
f 50//50 59//59 51//51
f 51//51 52//52 43//43
f 51//51 59//59 52//52
f 52//52 59//59 60//60
f 52//52 61//61 53//53
f 53//53 54//54 45//45
f 53//53 61//61 54//54
f 54//54 61//61 62//62
f 54//54 63//63 55//55
f 55//55 56//56 47//47
f 55//55 63//63 56//56
f 56//56 57//57 49//49
f 56//56 63//63 64//64
f 57//57 66//66 58//58
f 57//57 72//72 65//65
f 58//58 59//59 50//50
f 58//58 66//66 59//59
f 59//59 66//66 67//67
f 59//59 68//68 60//60
f 60//60 61//61 52//52
f 60//60 68//68 61//61
f 61//61 68//68 69//69
f 61//61 70//70 62//62
f 62//62 63//63 54//54
f 62//62 70//70 63//63
f 63//63 70//70 71//71
f 63//63 72//72 64//64
f 64//64 57//57 56//56
f 64//64 72//72 57//57
f 65//65 66//66 57//57
f 65//65 73//73 66//66
f 66//66 73//73 74//74
f 66//66 75//75 67//67
f 67//67 68//68 59//59
f 67//67 75//75 68//68
f 68//68 75//75 76//76
f 68//68 77//77 69//69
f 69//69 70//70 61//61
f 69//69 77//77 70//70
f 70//70 77//77 78//78
f 70//70 79//79 71//71
f 71//71 72//72 63//63
f 71//71 79//79 72//72
f 72//72 73//73 65//65
f 72//72 79//79 80//80
f 73//73 82//82 74//74
f 73//73 88//88 81//81
f 74//74 75//75 66//66
f 74//74 82//82 75//75
f 75//75 82//82 83//83
f 75//75 84//84 76//76
f 76//76 77//77 68//68
f 76//76 84//84 77//77
f 77//77 84//84 85//85
f 77//77 86//86 78//78
f 78//78 79//79 70//70
f 78//78 86//86 79//79
f 79//79 86//86 87//87
f 79//79 88//88 80//80
f 80//80 73//73 72//72
f 80//80 88//88 73//73
f 81//81 82//82 73//73
f 81//81 89//89 82//82
f 82//82 89//89 90//90
f 82//82 91//91 83//83
f 83//83 84//84 75//75
f 83//83 91//91 84//84
f 84//84 91//91 92//92
f 84//84 93//93 85//85
f 85//85 86//86 77//77
f 85//85 93//93 86//86
f 86//86 93//93 94//94
f 86//86 95//95 87//87
f 87//87 88//88 79//79
f 87//87 95//95 88//88
f 88//88 89//89 81//81
f 88//88 95//95 96//96
f 89//89 98//98 90//90
f 89//89 104//104 97//97
f 90//90 91//91 82//82
f 90//90 98//98 91//91
f 91//91 98//98 99//99
f 91//91 100//100 92//92
f 92//92 93//93 84//84
f 92//92 100//100 93//93
f 93//93 100//100 101//101
f 93//93 102//102 94//94
f 94//94 95//95 86//86
f 94//94 102//102 95//95
f 95//95 102//102 103//103
f 95//95 104//104 96//96
f 96//96 89//89 88//88
f 96//96 104//104 89//89
f 97//97 98//98 89//89
f 97//97 105//105 98//98
f 98//98 105//105 106//106
f 98//98 107//107 99//99
f 99//99 100//100 91//91
f 99//99 107//107 100//100
f 100//100 107//107 108//108
f 100//100 109//109 101//101
f 101//101 102//102 93//93
f 101//101 109//109 102//102
f 102//102 109//109 110//110
f 102//102 111//111 103//103
f 103//103 104//104 95//95
f 103//103 111//111 104//104
f 104//104 105//105 97//97
f 104//104 111//111 112//112
f 105//105 114//114 106//106
f 105//105 120//120 113//113
f 106//106 107//107 98//98
f 106//106 114//114 107//107
f 107//107 114//114 115//115
f 107//107 116//116 108//108
f 108//108 109//109 100//100
f 108//108 116//116 109//109
f 109//109 116//116 117//117
f 109//109 118//118 110//110
f 110//110 111//111 102//102
f 110//110 118//118 111//111
f 111//111 118//118 119//119
f 111//111 120//120 112//112
f 112//112 105//105 104//104
f 112//112 120//120 105//105
f 113//113 114//114 105//105
f 113//113 121//121 114//114
f 114//114 121//121 122//122
f 114//114 123//123 115//115
f 115//115 116//116 107//107
f 115//115 123//123 116//116
f 116//116 123//123 124//124
f 116//116 125//125 117//117
f 117//117 118//118 109//109
f 117//117 125//125 118//118
f 118//118 125//125 126//126
f 118//118 127//127 119//119
f 119//119 120//120 111//111
f 119//119 127//127 120//120
f 120//120 121//121 113//113
f 120//120 127//127 128//128
f 122//122 121//121 2//2
f 122//122 123//123 114//114
f 124//124 123//123 4//4
f 124//124 125//125 116//116
f 126//126 125//125 6//6
f 126//126 127//127 118//118
f 128//128 121//121 120//120
f 128//128 127//127 8//8
`
